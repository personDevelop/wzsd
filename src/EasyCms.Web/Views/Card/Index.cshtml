@model List<ShopCardInfo>
@using EasyCms.Business
@using EasyCms.Model
@{
    ViewBag.Title = "购物车--" + EasyCms.CmsSessionExtend.WebSite.Name; 
}
 
 @Styles.Render("~/bundles/cardcss")

    <div class="floor" style="width:990px;">
        <div class="cart-main">
            <div class="cart-filter-bar">

            </div>
            <div class='cart-header'>
                <div class="column checkbox">
                    <div class="cart-checkbox">
                        <input type="checkbox" checked="checked" id="toggle-checkboxes_up" name="toggle-checkboxes" class="jdcheckbox  CheckBoxALL">
                    </div>
                    全选
                </div>
                <div class="column goods">商品</div>
                <div class="column props"></div>
                <div class="column price">单价(元)</div>
                <div class="column quantity">数量</div>
                <div class="column sum">小计(元)</div>
                <div class="column action">操作</div>
            </div>

            <div class="cart-tbody">
               @if (Model.Count == 0)
               {
                <div class="item-list error"  > 购物车里空空的，快去挑选商品吧</div>

               }
               else
               {
                   foreach (ShopCardInfo cardItem in Model)
                   {
                    <div class="item-list">
                        <div class="item-single  item-item ">
                            <div class="item-form">
                                <div class="cell p-checkbox">
                                    <div class="cart-checkbox">
                                        <input type="checkbox" name="checkItem" checked="checked" class="jdcheckbox" /> 
                                        <span class="line-circle"></span>
                                    </div>
                                </div>
                                <div class="cell p-goods">
                                    <div class="goods-item">
                                        <div class="p-img">
                                            <a href="@Url.Action("index", "Product", new { id=cardItem.ProductId,other=cardItem.SKU})" target="_blank"><img src="@cardItem.ThumbImgUrl"></a>
                                        </div>
                                        <div class="item-msg">
                                            <div class="p-name">
                                                <a href="@Url.Action("index", "Product", new { id=cardItem.ProductId,other=cardItem.SKU})" target="_blank">@cardItem.Name</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="cell p-props p-props-new">
                                    <div class="props-txt" title="@cardItem.GuiGeInfo">@cardItem.GuiGeInfo</div>
                                    
                                </div>

                                <div class="cell p-price"><strong>299.00</strong></div>
                                <div class="cell p-quantity">
                                    <div class="quantity-form">
                                        <a href="javascript:void(0);" class="decrement ">-</a>
                                        <input autocomplete="off" type="text" class="itxt" value="@cardItem.Quantity">
                                        <a href="javascript:void(0);" class="increment">+</a>
                                    </div>
                                    <div class="ac ftx-03 quantity-txt" _stock="stock_1616043020">@(cardItem.Stock>0?"有货":"无货")</div>
                                </div>
                                <div class="cell p-sum">
                                    <strong>@cardItem.SalePrice</strong>
                                </div>
                                <div class="cell p-ops">
                                    @*<a class="cart-remove" val="@cardItem.ID" href="javascript:void(0);">删除</a>*@
                                </div>
                            </div>
                        </div> 
                    </div>
                   }
               } 
        </div>


            <div class="cart-tbody">
                <div class="item-list">
                    <div class="item-single  item-item ">
                        <div class="item-form">
                            <div class="cell p-checkbox">
                                <div class="cart-checkbox">
                                    <input type="checkbox" name="checkItem" class="jdcheckbox" />

                                    <span class="line-circle"></span>
                                </div>
                            </div>
                            <div class="cell p-goods">
                                <div class="goods-item">
                                    <div class="p-img">
                                        <a href="http://item.jd.com/1616043020.html" target="_blank"><img src="http://img10.360buyimg.com/cms/s80x80_jfs/t1585/77/1355422030/217136/bb380bc5/55ee416aN2218124e.jpg"></a>
                                    </div>
                                    <div class="item-msg">
                                        <div class="p-name">
                                            <a href="http://item.jd.com/1616043020.html" target="_blank">骆驼牌冰雪系列冲锋衣 男 三合一两件套 秋冬季防风保暖抓绒内胆情侣款登山服 宝蓝/深蓝男款 L</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="cell p-props p-props-new">
                                <div class="props-txt" title="宝蓝/深蓝男款">颜色：宝蓝/深蓝男款</div>
                                <div class="props-txt" title="L">尺码：L</div>
                            </div>

                            <div class="cell p-price"><strong>299.00</strong></div>
                            <div class="cell p-quantity">
                                <div class="quantity-form">
                                    <a href="javascript:void(0);" class="decrement ">-</a>
                                    <input autocomplete="off" type="text" class="itxt" value="5">
                                    <a href="javascript:void(0);" class="increment">+</a>
                                </div>
                                <div class="ac ftx-03 quantity-txt" _stock="stock_1616043020">有货</div>
                            </div>
                            <div class="cell p-sum">
                                <strong>1495.00</strong>
                            </div>
                            <div class="cell p-ops">
                                <a class="cart-remove" val="1" href="javascript:void(0);">删除</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-list">
                    <div class="item-single  item-item ">
                        <div class="item-form">
                            <div class="cell p-checkbox">
                                <div class="cart-checkbox">
                                    <input type="checkbox" name="checkItem" class="jdcheckbox" />

                                    <span class="line-circle"></span>
                                </div>
                            </div>
                            <div class="cell p-goods">
                                <div class="goods-item">
                                    <div class="p-img">
                                        <a href="http://item.jd.com/1616043020.html" target="_blank"><img src="http://img10.360buyimg.com/cms/s80x80_jfs/t1585/77/1355422030/217136/bb380bc5/55ee416aN2218124e.jpg"></a>
                                    </div>
                                    <div class="item-msg">
                                        <div class="p-name">
                                            <a href="http://item.jd.com/1616043020.html" target="_blank">骆驼牌冰雪系列冲锋衣 男 三合一两件套 秋冬季防风保暖抓绒内胆情侣款登山服 宝蓝/深蓝男款 L</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="cell p-props p-props-new">
                                <div class="props-txt" title="宝蓝/深蓝男款">颜色：宝蓝/深蓝男款</div>
                                <div class="props-txt" title="L">尺码：L</div>
                            </div>

                            <div class="cell p-price"><strong>299.00</strong></div>
                            <div class="cell p-quantity">
                                <div class="quantity-form">
                                    <a href="javascript:void(0);" class="decrement ">-</a>
                                    <input autocomplete="off" type="text" class="itxt" value="5">
                                    <a href="javascript:void(0);" class="increment">+</a>
                                </div>
                                <div class="ac ftx-03 quantity-txt" _stock="stock_1616043020">有货</div>
                            </div>
                            <div class="cell p-sum">
                                <strong>1495.00</strong>
                            </div>
                            <div class="cell p-ops">
                                <a class="cart-remove" val="1" href="javascript:void(0);">删除</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="cart-toolbar" style="width: 988px; height: 50px;">
                <div class="toolbar-wrap">
                    <div class="select-all">
                        <div class="cart-checkbox">
                            <input type="checkbox" checked="checked" class="jdcheckbox">
                        </div>
                        全选
                    </div>
                    <div class="operation">
                        <a href="#none">删除选中的商品</a>
                    </div>
                    <div class="toolbar-right">
                        <div class="btn-area">
                            <a href="javascript:void(0);" onclick="return false;" class="submit-btn" data-bind="1">
                                去结算<b></b>
                            </a>
                        </div>
                        <div class="price-sum">
                            <div>
                                <span class="txt">总价（不含运费）：</span>
                                <span class="price sumPrice"><em>￥4519.40</em></span>
                                <br>
                                <span class="txt">已节省：</span>
                                <span class="price totalRePrice">-￥100.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
  @if (Model.Count > 0)
  {
    <div class="cart-toolbar" style="width: 988px; height: 50px;">
        <div class="toolbar-wrap">
            <div class="select-all">
                <div class="cart-checkbox">
                    <input type="checkbox" checked="checked" class="jdcheckbox CheckBoxALL">
                </div>
                全选
            </div>
            <div class="operation">
                <a href="#none" class="deleteSelecte">删除选中的商品</a>
            </div>
            <div class="toolbar-right">
                <div class="btn-area">
                    <a href="javascript:void(0);" onclick="return false;" class="submit-btn" data-bind="1">
                        去结算<b></b>
                    </a>
                </div>
                <div class="price-sum">
                    <div>
                        <span class="txt">总价（不含运费）：</span>
                        <span class="price sumPrice"><em>￥4519.40</em></span>
                        <br>
                        <span class="txt">已节省：</span>
                        <span class="price totalRePrice">-￥100.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
  }
           
        </div>

    </div>
 
    <div class="space20"></div>
<script>
    function deleteCard(isSelected,cardID) {
        var array = new Array();
        if (isSelected) {
            //删除选中的
            $(".item-form .jdcheckbox:checked").each(function (i) {


            });
        } else {
            //单条删除
            array.push(cardID);
        }
    }
    $(function () {
        $(".deleteSelecte").click(function () {
            deleteCard(true);
        });
        $(".cart-remove").click(function () {
            var val = $(this).attr("val");
            deleteCard(false,val);
        });
        
        $(".decrement").click(function () {
            var val = $(this).next(".itxt").val()*1;
            if (val>0) {
                $(this).next(".itxt").val(val-1);
            } 
        });
        $(".increment").click(function () {
            var val = $(this).prev(".itxt").val() * 1;
            $(this).prev(".itxt").val(val + 1);
            
        });

        $(".CheckBoxALL").change(function () {
            $(".item-form .jdcheckbox").prop("checked", $("#toggle-checkboxes_up").prop("checked")); 
        });

    });
</script>
 