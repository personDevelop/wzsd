@model FindPwdModel
@using EasyCms.Model
@using EasyCms
@{
    
    ViewBag.Title = "找回密码-" + CmsSessionExtend.WebSite.Name;
}
<style>

        #container, #container .ww{
        background-color: #f5f5f5;
    }
        .ww{
        width: 990px;
        margin: 0 auto;
    }
        .mod-comm {
        padding: 10px 20px 20px;
    }
        .mod-main {
        padding: 10px;
        background-color: #fff;
        margin-bottom: 20px;
    }
        .mod-comm .mt {
        padding: 10px 0;
    }
        .mod-main .mt {
        display: inline-block;
        display: block;
        padding: 10px;
    }
        .m, .mb, .mc, .mt, .sm, .smb, .smc, .smt {
        overflow: hidden;
        zoom: 1;
    }
        .mod-main .mt:after {
        content: ".";
        display: block;
        height: 0;
        clear: both;
        visibility: hidden;
    }
        .mod-comm .mt h3 {
        font-size: 12px;
        color: #666;
        font-family: '\5b8b\4f53';
        line-height: 18px;
    }
        .mod-main .mt h3 {
        float: left;
        font-family: 'Microsoft YaHei';
        font-size: 16px;
        color: #333;
        line-height: 20px;
    }
        div.mod-main .mc {
        overflow: hidden;
    }
        .mod-comm .mc {
        line-height: 20px;
    }
        .mod-main .mc {
        overflow: visible;
    }
        #sflex04 {
        width: 640px;
    }
        .stepflex {
        border-top: 5px solid #ccc;
        text-align: center;
        margin: 30px auto;
    }
        .stepflex {
        display: inline-block;
        display: block;
    }
        dl.doing {
        border-top-color: #7abd54;
    }
        .stepflex dl {
        float: left;
        position: relative;
        width: 160px;
        top: -5px;
        border-top: 5px solid #ccc;
    }
        .doing .s-num {
        background-position: -23px 0;
    }
        .s-num {
        position: relative;
        margin: -15px auto 0;
        color: #fff;
        font-weight: 700;
        width: 23px;
        height: 23px;
        background-image: url(//misc.360buyimg.com/user/myjd-2015/css/i/step2013.png);
        line-height: 23px;
    }
        .doing .s-text {
        color: #7abd54;
    }
        .s-text {
        color: #ccc;
    }
        .doing s {
        background-position: -23px -24px;
    }.first s {
        background-position: 0 -24px;
        background-color: #fff;
    }
    .stepflex s {
        left: 0;
    }
    .doing b, .doing s, .first s, .last b {
        width: 5px;
        height: 5px;
        position: absolute;
        line-height: 0;
        font-size: 0;
        top: -5px;
        background-image: url(//misc.360buyimg.com/user/myjd-2015/css/i/step2013.png);
        overflow: hidden;
    }
    .doing b, .doing s, .first s, .last b {
        width: 5px;
        height: 5px;
        position: absolute;
        line-height: 0;
        font-size: 0;
        top: -5px;
        background-image: url(//misc.360buyimg.com/user/myjd-2015/css/i/step2013.png);
        overflow: hidden;
    }
    .doing b {
        background-position: -28px -24px;
        background-color: #ccc;
    }
    .stepflex b {
        right: 0;
    }
    .last .s-num {
        background-position: -68px 0;
    }

    .form .item {
        display: inline-block;
        display: block;
        margin-bottom: 20px;
        line-height: 30px;
    }
    .form .item span.label {
        float: left;
        height: 18px;
        line-height: 18px;
        padding: 6px 0;
        width: 100px;
        text-align: right;
    }
    .fl {
        float: left;
    }
    div.form .itxt, div.form .text {
        padding: 8px 23px 8px 5px;
    }
    .form .itxt, .form .text {
        height: 18px;
        width: 127px;
        padding: 5px 23px 5px 5px;
    }
    .form .area, .form .itxt, .form .sele, .form .selt {
        line-height: 18px;
        border: 1px solid #ccc;
        padding: 5px;
        float: none;
    }
    .clear, .clr {
        display: block;
        overflow: hidden;
        clear: both;
        height: 0;
        line-height: 0;
        font-size: 0;
    }
    .form label {
        float: none;
    }
    .hide {
        display: none;
    }
</style>

<div id="container">
    <div class="ww">

        <div class="mod-main mod-comm">
            <div class="mt">
                <h3>找回密码</h3>
            </div>
            <div class="mc">
                <div id="sflex04" class="stepflex ">
                    <dl class="first doing">
                        <dt class="s-num">1</dt>
                        <dd class="s-text">填写账户名<s></s><b></b></dd>
                        <dd></dd>
                    </dl>
                    <dl class="normal">
                        <dt class="s-num">2</dt>
                        <dd class="s-text">验证身份<s></s><b></b></dd>
                    </dl>
                    <dl class="normal">
                        <dt class="s-num">3</dt>
                        <dd class="s-text">设置新密码<s></s><b></b></dd>
                    </dl>
                    <dl class="last">
                        <dt class="s-num">&nbsp;</dt>
                        <dd class="s-text">完成<s></s><b></b></dd>
                    </dl>
                </div>
                @using (Html.BeginForm("FindPwd", "Account", new { ReturnUrl = "" }, FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    <div class="form formno" style="width: 65%;margin-left: 20%;">
                        <div class="item">
                            <span class="label">账户名：</span>
                            <div class="fl">
                                @Html.TextBoxFor(Model => Model.Account, new { @class = "itxt", tabindex = "1" ,value = "用户名/邮箱" })
                             
                                <div class="clr"></div>
                                @Html.ValidationMessageFor(Model => Model.Account) 
                            </div>

                            <div class="clr"></div>
                        </div>

                        <div class="item">
                            <span class="label">验证码：</span>
                            <div class="fl">
                                @Html.TextBoxFor(Model => Model.VaryCode, new { @class = "itxt", tabindex = "2" }) 

                                <img id="JD_Verification1" style="cursor:pointer;width:100px;height:26px;" alt="验证码"  class="verify-code" src="@Url.Action("","VarifyCode")">
                                <a href="javascript:void(0)" onclick="$('#JD_Verification1').click();">看不清楚换一张</a> 

                                <div class="clr"></div>
                                @Html.ValidationMessageFor(Model => Model.VaryCode) 
                                
                                <div class="msg-error" id="authCode_error"></div>
                            </div>
                            <div class="clr"></div>
                        </div>


                        <div class="item">
                            <span class="label">&nbsp;</span>
                            <div class="fl btn-group">
                                <a class="btn btn-addtocart" style="width:85px"  id="submit"><b></b>提交申请</a> 
                            </div>
                            <div class="clr"></div>
                        </div> 
                    </div>
                }
            </div>
        </div>
    </div>
</div>
 
<script type="text/javascript">
        $(function () {
            if ($(".msg-error").text() && $.trim($(".msg-error").text()) != ">") {
                $(".msg-error").html("<b></b>" + $(".msg-error").text());
                $(".msg-error").show();
            } else {
                $(".msg-error").hide();
            }
            $("#JD_Verification1").click(function () {

                $('#VaryCode').val('');
                $("#JD_Verification1").attr("src", "@Url.Action("Index", "VarifyCode")" + "/" + new Date().getTime());

            });

            $(".clear-btn").click(function () {

                $(this).prev().val('');

            });

            $("#submit").click(function () {


                var name = $.trim($("#Account").val()); 
                var varycode = $.trim($("#VaryCode").val());

                var error="";
                if (!name) {
                    error = "用户名不能为空";
                }else   if (!varycode) {
                    error = "验证码不能为空";
                }
                if (error) {
                    $(".msg-error").html("<b></b>>" + error);
                    $(".msg-error").show();
                    return false;
                } else {

                    $("form").submit();
                }

            });

        });

</script>
