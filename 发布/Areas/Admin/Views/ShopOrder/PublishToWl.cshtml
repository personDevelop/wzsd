@{
    Layout = null;
    ViewBag.Title = "发货到物流";
}
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0,user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/bundles/css")
    @Styles.Render("~/bundles/jqxcss")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqx")
    @Scripts.Render("~/bundles/eshopJS")
</head>

<body class="mainbody">

    <!--导航栏-->
    <div class="location">
        <i class="home"></i>
        <span>@ViewBag.Title</span>
    </div>
    <!--/导航栏-->
    <!--内容-->
    <div id="floatHead" class="content-tab-wrap">
        <div class="content-tab">
            <div class="content-tab-ul-wrap">
                <ul>
                    <li><a class="selected" href="javascript:;">基本信息</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="tab-content">

        @HelperExtend.DropDownList("LogistID", "物流公司", hint: "*必填, 请选择要发送的物流公司", downInfo: new DropDownListInfo() { Url = Url.Action("GetListForSelecte", "ShopExpress") })
        <div class="table-container">
            <div id="jqxgrid">
            </div>
            <table>
                <tr>
                    <td>
                        <input id="btnFH" type="button" value="发货">
                        <input id="btnPrintExpress" type="button" value="打印快递单">
                        <input id="btnPrintInvoice" type="button" value="打印发票">
                    </td>
                </tr>

            </table>

        </div>
    </div>


    <script type="text/javascript">

        $(function () {


            $("#btnFH").jqxButton({ width: '150', template: 'success' });
            $("#btnFH").on('click', function () {
                var rowindexes = $('#jqxgrid').jqxGrid('getselectedrowindexes');
                var data = {wlgs:"",order:[]};
                for (var i in rowindexes) {
                    var d = $('#jqxgrid').jqxGrid('getrowdata', i);
                    data.order.push(d.ID);
                }
                $.ajax({
                    type: "POST",
                    type: "json",
                    url: "@Url.Action("Publish")",
                    data: data,
                    success: function (msg) {
                        alert("Data Saved: " + msg);
                    }
                });

            });
            $("#btnPrintExpress").jqxButton({ width: '150', template: 'success' });
            $("#btnPrintInvoice").jqxButton({ width: '150', template: 'success' });



            //初始化表单验证
            $("form").validate({
                ignore: "",
                rules: {
                    LogistID: {
                        required: true
                    }

                },
                messages: {
                    LogistID: {
                        required: "请选择物流公司"
                    }
                },
                errorPlacement: errorPlace
            });
        })
    </script>
    <script type="text/javascript">

        $(document).ready(function () {

            var url = "@Url.Action("GetList")";
            var datafields = [{ name: 'ID' },
		{ name: 'OrderType' }, { name: 'OrderResId' }, { name: 'ParentID' }, { name: 'HasChildren' }, { name: 'MemberID' }, { name: 'MemberName' }, { name: 'MemberEmail' }, { name: 'MemberCallPhone' }, { name: 'RegionID' }, { name: 'ShipRegion' },

		{ name: 'ShipAddress' }, { name: 'ShipZip' }, { name: 'ShipName' }, { name: 'ShipTel' }, { name: 'ShipEmail' }, { name: 'ShipModeID' }, { name: 'ShipModeName' }, { name: 'PayTypeID' }, { name: 'PayTypeName' }, { name: 'PayTypeGateWay' },

		{ name: 'ExpressCompanyID' }, { name: 'ExpressCompanyName' }, { name: 'ShipOrderNum' }, { name: 'IsFreeShiping' },

		{ name: 'Freight' }, { name: 'FreightAdjust' }, { name: 'FreightActual' }, { name: 'Weight' },

		{ name: 'CostPrice' }, { name: 'Discount' }, { name: 'TotalPrice' },

		{ name: 'PayMoney' }, { name: 'Remark' }, { name: 'OrderPoint' }, { name: 'ShipStatus' },

		{ name: 'PayStatus' }, { name: 'OrderStatus' }, { name: 'HasReturn' }, { name: 'ReturnMoney' },

		{ name: 'RefundStatus' }, { name: 'IsInvoice' }, { name: 'InvoiceInfo' },

		{ name: 'SellerID' }, { name: 'SellerName' }, { name: 'SellerEmail' },

		{ name: 'SellerPhone' }, { name: 'SupplierID' }, { name: 'SupplierName' },

		{ name: 'OrderIP' }, { name: 'CommentStatus' }, { name: 'DeliveryTime' },

		{ name: 'SpecifiedDate' }, { name: 'ExportCount' }, { name: 'CreateDate' },

		{ name: 'UpdateDate' }, { name: 'HasDelete' }, { name: 'ClientType' },

		{ name: 'InvoiceNote' }];
            var columns = [
  { text: '订单号', dataField: 'ID', width: 150 },
     { text: '收件人', dataField: 'ShipName', width: 100 },
  { text: '收件电话', dataField: 'ShipTel', width: 100 },
  { text: '地区', dataField: 'ShipRegion', width: 100 },
  { text: '付款方式', dataField: 'PayTypeName', width: 100 },
  { text: '总价格', dataField: 'TotalPrice', cellsalign: "right", width: 100 },
  { text: '付款状态', dataField: 'PayStatus', width: 100 },
  { text: '订单状态', dataField: 'OrderStatus', width: 100 },
    { text: '发票抬头', dataField: 'InvoiceInfo', width: 200 },
      { text: '发票说明', dataField: 'InvoiceNote', width: 200 },
      { text: '创建日期', dataField: 'CreateDate', width: 100 }];

            CreateGrid("jqxgrid", url, datafields, columns, {
                isMutilSelect: true, adapter: {
                    formatData: function (data) {


                        data.OrderNo = $("#OrderNo").val();

                        data.ShrMc = $("#ShrMc").val();

                        data.AccountName = $("#AccountName").val();

                        data.StartOrderDate = $("#StartOrderDate").val();

                        data.EndOrderDate = $("#EndOrderDate").val();

                        data.PayStatus = $("#PayStatus").val();

                        data.ShipStatus = $("#ShipStatus").val();

                        data.OrderStatus = $("#OrderStatus").val();
                    }

                }
            });
            $("#jqxgrid").on("bindingcomplete", function (event) {
                var rows = $('#jqxgrid').jqxGrid('getrows');
                for (var i = 0; i < rows.length; i++) {
                    $('#jqxgrid').jqxGrid('selectrow', i);
                }
            });



        });
    </script>
</body>
</html>
