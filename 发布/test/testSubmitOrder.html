<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script src="http://localhost:7161/Scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        function sumitJson() {

            var data = {};
            //data.Remark = $("#Remark").val();
            data.OrderItems = [{}, {}, {}];
            data.OrderItems[0].Sku = $("#OrderItems0Sku").val();
            data.OrderItems[0].BuyCount = $("#OrderItems0BuyCount").val();
            data.OrderItems[0].UsingCouponsID = $("#OrderItems0UsingCouponsID").val();

            data.OrderItems[1].Sku = $("#OrderItems1Sku").val();
            data.OrderItems[1].BuyCount = $("#OrderItems1BuyCount").val();
            data.OrderItems[1].UsingCouponsID = $("#OrderItems1UsingCouponsID").val();

            data.OrderItems[2].Sku = $("#OrderItems2Sku").val();
            data.OrderItems[2].BuyCount = $("#OrderItems2BuyCount").val();
            data.OrderItems[2].UsingCouponsID = $("#OrderItems2UsingCouponsID").val();
            data = {
                "CashOnDelivery": "true",
                "AddressID": "2ee34b55-b3cb-444d-a3c0-6c32c0c74ec7",
                "Promotion": null,
                "OrderItems": [{
                    "Point": 0,
                    "Sku": "e2ad3e15-b26f-4f98-96d3-a750d4054e7b",
                    "Promotion": null,
                    "BuyCount": 1,
                    "IsVirtualProduct": false,
                    "ProductName": "金立 超强续航 (M5) 白色 16G 移动联通电信4G手机 双卡双待  阿萨德:黑色  尺寸:大  as:郁金香",
                    "MarketPrice": 0,
                    "IsGifts": false,
                    "ProductID": "2c9ecb7b-48a2-4801-9478-ed2e82fe3b76",
                    "OrderResId": null,
                    "ProductCode": "ds-0",
                    "ImgPath": "http:\/\/192.168.22.106\/\/Upload\/image\/20150911\/0514e58d-ca2f-48af-97ff-a7a3d9eea452.jpg",
                    "SalePrice": 1800,
                    "OrderType": 0
                }],
                "TotalPrice": "1800",
                "InvoiceInfo": null,
                "IsInvoice": false,
                Coupon: "null",
                "Remark": null,
                "InvoiceNote": null,
                "Freight": 0,
                "PayTypeID": null
            };
            $.ajax({
                url: "http://localhost:7161/api/ShopOrderApi/PostOrder",
                type: "POST",
                data: data,
                dataType: "json",
                success: function () { alert("成功"); }
            });
        }


        function sumitJson1() {

            var data = [];
            data["Remark"] = $("#Remark").val();
            data["Promotion[0].ID"] =  "01f82ec6-785d-4ef6-9933-6a1b4c7fd1f1" ;
            data["Promotion[1].ID"] =  "3bb67717-41b7-468f-ada4-53f474761800" ;
            data["Promotion[2].ID"] = "bf178bd9-afab-4a38-a37d-10cae8f95e64" ;
            data["OrderItems[0].Sku"] = $("#OrderItems0Sku").val();
            data["OrderItems[0].BuyCount"] = $("#OrderItems0BuyCount").val();
            data["OrderItems[0].UsingCouponsID"] = $("#OrderItems0UsingCouponsID").val();
    
            data["OrderItems[1].Sku"] = $("#OrderItems1Sku").val();
            data["OrderItems[1].BuyCount"] = $("#OrderItems1BuyCount").val();
            data["OrderItems[1].UsingCouponsID"] = $("#OrderItems1UsingCouponsID").val();

            data["OrderItems[2].Sku"] = $("#OrderItems2Sku").val();
            data["OrderItems[2].BuyCount"] = $("#OrderItems2BuyCount").val();
            data["OrderItems[2].UsingCouponsID"] = $("#OrderItems2UsingCouponsID").val();

            $.ajax({
                url: "http://localhost:7161/api/ShopOrderApi/PostOrder",
                type: "POST",
                data: data,
                //dataType: "json",
                success: function () { alert("成功"); }
            });
        }
        function sumitJson2() {

            var data = "";

            data += "Remark=" + $("#Remark").val();
            data += "&OrderItems[0].Sku=" + $("#OrderItems0Sku").val();
            data += "&OrderItems[0].BuyCount=" + $("#OrderItems0BuyCount").val();
            data += "&OrderItems[0].UsingCouponsID=" + $("#OrderItems0UsingCouponsID").val();
            data += "&OrderItems[1].Sku=" + $("#OrderItems1Sku").val();
            data += "&OrderItems[1].BuyCount=" + $("#OrderItems1BuyCount").val();
            data += "&OrderItems[1].UsingCouponsID=" + $("#OrderItems1UsingCouponsID").val();
            data += "&OrderItems[2].Sku=" + $("#OrderItems2Sku").val();
            data += "&OrderItems[2].BuyCount=" + $("#OrderItems2BuyCount").val();
            data += "&OrderItems[2].UsingCouponsID=" + $("#OrderItems2UsingCouponsID").val();


            $.ajax({
                url: "http://localhost:7161/api/ShopOrderApi/CreateOrder",
                type: "POST",
                data: data,
                dataType: "json",
                success: function () { alert("成功"); }
            });
        }
    </script>
</head>
<body>
    <form action="http://localhost:7161/api/ShopOrderApi/PostOrder" method="post">

        订单主表<br /><br /><br />
        备注  <input type="text" id="Remark" name="Remark" value="备注" />
        <br /><br /><br /><br />
        订单商品明细表<br /><br /><br />
        <table style="width:100%;">
            <tr>
                <td><input id="OrderItems0Sku" name="OrderItems[0].Sku" type="text" value="Sku1" /> </td>
                <td><input id="OrderItems0BuyCount" name="OrderItems[0].BuyCount" type="text" value="4" /></td>
                <td><input id="OrderItems0UsingCouponsID" name="OrderItems[0].UsingCouponsID" type="text" value="优惠券id1" /></td>
            </tr>
            <tr>
                <td><input id="OrderItems1Sku" name="OrderItems[1].Sku" type="text" value="Sku2" /> </td>
                <td><input id="OrderItems1BuyCount" name="OrderItems[1].BuyCount" type="text" value="5" /></td>
                <td><input id="OrderItems1UsingCouponsID" name="OrderItems[1].UsingCouponsID" type="text" value="优惠券id2" /></td>
            </tr>
            <tr>
                <td><input id="OrderItems2Sku" name="OrderItems[2].Sku" type="text" value="Sku3" /> </td>
                <td><input id="OrderItems2BuyCount" name="OrderItems[2].BuyCount" type="text" value="6" /></td>
                <td><input id="OrderItems2UsingCouponsID" name="OrderItems[2].UsingCouponsID" type="text" value="优惠券id3" /></td>
            </tr>
            <tr>
                <td><input id="Promotion0" name="Promotion[0].ID" type="text" value="01f82ec6-785d-4ef6-9933-6a1b4c7fd1f1" /> </td>
                <td><input id="Promotion1" name="Promotion[1].ID" type="text" value="3bb67717-41b7-468f-ada4-53f474761800" /></td>
                <td><input id="Promotion2" name="Promotion[2].ID" type="text" value="bf178bd9-afab-4a38-a37d-10cae8f95e64" /></td>
            </tr>
        </table>
        <input id="Submit1" type="submit" value="提交" />
        <input id="btn" type="button" onclick="sumitJson(); return false;" value="Json提交" />
        <input id="btn" type="button" onclick="sumitJson1(); return false;" value="Json数组提交" />
        <input id="btn" type="button" onclick="sumitJson2(); return false;" value="字符串键值对提交" />
    </form>
</body>
</html>
